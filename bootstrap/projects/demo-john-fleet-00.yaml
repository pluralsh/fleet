apiVersion: v1
kind: Namespace
metadata:
  name: demo-john-fleet-00
---
apiVersion: deployments.plural.sh/v1alpha1
kind: ServiceAccount
metadata:
  name: demo-john-fleet-00
spec:
  email: demo-john-fleet-00-sa@plural.sh
  tokenSecretRef:
    name: demo-john-fleet-00-sa-token
    namespace: demo-john-fleet-00
---
apiVersion: deployments.plural.sh/v1alpha1
kind: Project
metadata:
  name: demo-john-fleet-00
  # annotations:
  #   config.kubernetes.io/depends-on: deployments.plural.sh/ServiceAccount/demo-john-fleet-00
spec:
  name: demo-john-fleet-00
  description: Resources for managing the demo-john-fleet-00 fleet
  bindings:
    write:
    - userEmail: demo-john-fleet-00-sa@plural.sh
---
apiVersion: deployments.plural.sh/v1alpha1
kind: NamespaceCredentials
metadata:
  name: demo-john-fleet-00
spec:
  namespaces:
  - demo-john-fleet-00
  secretRef:
    name: demo-john-fleet-00-sa-token
    namespace: demo-john-fleet-00