apiVersion: deployments.plural.sh/v1alpha1
kind: ServiceDeployment
metadata:
  name: clusters-{{ context.fleetName }}-dev
spec:
  namespace: fleets
  git:
    folder: fleets/clusters/{{ context.fleetName }}/dev
    ref: main
  configuration:
    kubernetesVersion: "1.29" # version
    drain: green # drain
    active: blue # active
    nextKubernetesVersion: "1.29" # version
  repositoryRef:
    kind: GitRepository
    name: fleet
    namespace: fleets
  clusterRef:
    kind: Cluster
    name: mgmt
    namespace: infra