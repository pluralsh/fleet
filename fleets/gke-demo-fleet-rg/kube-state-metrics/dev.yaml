apiVersion: deployments.plural.sh/v1alpha1
kind: ServiceDeployment
metadata:
  name: kube-state-metrics-dev
spec:
  name: kube-state-metrics
  namespace: kube-state-metrics
  helm:
    chart: kube-state-metrics
    version: 5.19.0 # VERSION
    url: https://prometheus-community.github.io/helm-charts
  clusterRef:
    kind: Cluster
    name: gke-demo-rg-dev
    namespace: gke-demo-fleet-rg
---
apiVersion: deployments.plural.sh/v1alpha1
kind: GlobalService
metadata:
  name: kube-state-metrics-dev-gke-demo-fleet-rg
spec:
  cascade:
    delete: true
  serviceRef:
    name: kube-state-metrics-dev
    namespace: gke-demo-fleet-rg
  projectRef:
    name: gke-demo-fleet-rg
  tags:
    tier: dev